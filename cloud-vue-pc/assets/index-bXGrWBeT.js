import{N as F,r as c,b as u,j as k,o as y,c as e,e as l,g as m,A as b,h as x,q as S}from"./index-B62j_sKj.js";import{u as E}from"./config-BDp0Jzap.js";import{_ as I,e as D}from"./FileUpload-cXOOPNEm.js";const N={__name:"ChangePassWord",setup(h){const a=F(),_=c({username:window.localStorage.getItem("username"),password:""}),p=c(!1),v=f=>{p.value=!0,b.registerFn(_.value).then(s=>{x.success("修改成功"),window.localStorage.setItem("token",""),window.localStorage.setItem("username",""),a.push("/login")}).finally(()=>{p.value=!1})};return(f,s)=>{const r=u("a-input"),t=u("a-form-item"),d=u("a-button"),g=u("a-form");return y(),k("div",null,[e(g,{"label-col":{span:8},model:_.value,"wrapper-col":{span:16},autocomplete:"off",name:"basic",onFinish:v},{default:l(()=>[e(t,{label:"帐号",name:"username"},{default:l(()=>[e(r,{value:_.value.username,"onUpdate:value":s[0]||(s[0]=n=>_.value.username=n),style:{width:"260px"},rules:[{required:!0,message:"请输入帐号",trigger:"blur"}]},null,8,["value"])]),_:1}),e(t,{label:"密码",name:"password"},{default:l(()=>[e(r,{value:_.value.password,"onUpdate:value":s[1]||(s[1]=n=>_.value.password=n),style:{width:"260px"},type:"password",rules:[{required:!0,message:"请输入密码",trigger:"blur"}]},null,8,["value"])]),_:1}),e(t,{"wrapper-col":{offset:8,span:16}},{default:l(()=>[e(d,{"html-type":"submit",type:"primary",loading:p.value},{default:l(()=>s[2]||(s[2]=[m("修改密码")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},T={class:"app-container"},V={__name:"index",setup(h){const a=c({is_execute:0,time_interval:"",ding_talk_token:"",tg_bot_token:"",tg_chat_id:"",wx_push_spt:"",chanel_url:""}),_=()=>{b.getConfig().then(r=>{a.value=r[0]})},p=E(),v=r=>{b.updateConfig(a.value).then(t=>{console.log("Success:",t),x.success("保存成功,"+t.res_message),a.value.chanel_url&&p.setChangelUrl(a.value.chanel_url)})},f=()=>{D.exportToExcel([a.value],"定时配置.xlsx"),x.success("导出成功")},s=r=>{console.log("导入的数据",r),a.value=r[0]};return S(()=>{_()}),(r,t)=>{const d=u("a-radio"),g=u("a-radio-group"),n=u("a-form-item"),U=u("a-input-number"),i=u("a-input"),w=u("a-button"),C=u("a-space"),q=u("a-form");return y(),k("div",T,[e(q,{"label-col":{span:8},model:a.value,"wrapper-col":{span:16},autocomplete:"off",name:"basic",onFinish:v},{default:l(()=>[e(n,{rules:[{required:!0,message:"请选择!"}],label:"执行状态"},{default:l(()=>[e(g,{value:a.value.is_execute,"onUpdate:value":t[0]||(t[0]=o=>a.value.is_execute=o)},{default:l(()=>[e(d,{value:0},{default:l(()=>t[7]||(t[7]=[m("暂停")])),_:1}),e(d,{value:1},{default:l(()=>t[8]||(t[8]=[m("执行")])),_:1})]),_:1},8,["value"])]),_:1}),e(n,{rules:[{required:!0,message:"请输入!"}],label:"执行间隔时间"},{default:l(()=>[e(U,{value:a.value.time_interval,"onUpdate:value":t[1]||(t[1]=o=>a.value.time_interval=o),"addon-after":"分钟"},null,8,["value"])]),_:1}),e(n,{label:"钉钉机器人token",name:"ding_talk_token"},{default:l(()=>[e(i,{value:a.value.ding_talk_token,"onUpdate:value":t[2]||(t[2]=o=>a.value.ding_talk_token=o),style:{width:"260px"}},null,8,["value"])]),_:1}),e(n,{label:"tg_bot_token",name:"tg_bot_token"},{default:l(()=>[e(i,{value:a.value.tg_bot_token,"onUpdate:value":t[3]||(t[3]=o=>a.value.tg_bot_token=o),style:{width:"260px"}},null,8,["value"])]),_:1}),e(n,{label:"tg_chat_id",name:"tg_chat_id"},{default:l(()=>[e(i,{value:a.value.tg_chat_id,"onUpdate:value":t[4]||(t[4]=o=>a.value.tg_chat_id=o),style:{width:"260px"}},null,8,["value"])]),_:1}),e(n,{label:"wx_push_spt",name:"wx_push_spt"},{default:l(()=>[e(i,{value:a.value.wx_push_spt,"onUpdate:value":t[5]||(t[5]=o=>a.value.wx_push_spt=o),style:{width:"260px"}},null,8,["value"])]),_:1}),e(n,{label:"频道地址",name:"chanel_url"},{default:l(()=>[e(i,{value:a.value.chanel_url,"onUpdate:value":t[6]||(t[6]=o=>a.value.chanel_url=o),style:{width:"260px"}},null,8,["value"])]),_:1}),e(n,{"wrapper-col":{offset:8,span:16}},{default:l(()=>[e(C,null,{default:l(()=>[e(I,{onOk:s,title:"导入"}),e(w,{type:"primary",onClick:f},{default:l(()=>t[9]||(t[9]=[m("导出")])),_:1}),e(w,{"html-type":"submit",type:"primary"},{default:l(()=>t[10]||(t[10]=[m("保存")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),e(N)])}}};export{V as default};
