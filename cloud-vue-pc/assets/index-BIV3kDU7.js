import{r as m,Y as G,x as H,Z as F,_ as I,$ as N,a0 as Z,a1 as z,i as E,a2 as $,w as O,q as J,a3 as K,V as Q,a4 as U}from"./index-DYztBfRV.js";function W(e){return Z()?(z(e),!0):!1}function d(e){return typeof e=="function"?e():H(e)}const T=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const j=Object.prototype.toString,ee=e=>j.call(e)==="[object Object]",te=()=>{};function ne(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const a=t;t=void 0,a&&await a},n}function ae(e,t={}){if(!F(e))return I(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const a in e.value)n[a]=N(()=>({get(){return e.value[a]},set(l){var o;if((o=d(t.replaceRef))!=null?o:!0)if(Array.isArray(e.value)){const u=[...e.value];u[a]=l,e.value=u}else{const u={...e.value,[a]:l};Object.setPrototypeOf(u,Object.getPrototypeOf(e.value)),e.value=u}else e.value[a]=l}}));return n}function oe(e,t,n={}){const{immediate:a=!0}=n,l=m(!1);let o=null;function p(){o&&(clearTimeout(o),o=null)}function u(){l.value=!1,p()}function g(...c){p(),l.value=!0,o=setTimeout(()=>{l.value=!1,o=null,e(...c)},d(t))}return a&&(l.value=!0,T&&g()),W(u),{isPending:G(l),start:g,stop:u}}const Y=T?window:void 0,X=T?window.navigator:void 0;function re(e){var t;const n=d(e);return(t=n==null?void 0:n.$el)!=null?t:n}function _(...e){let t,n,a,l;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,a,l]=e,t=Y):[t,n,a,l]=e,!t)return te;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const o=[],p=()=>{o.forEach(s=>s()),o.length=0},u=(s,f,v,h)=>(s.addEventListener(f,v,h),()=>s.removeEventListener(f,v,h)),g=O(()=>[re(t),d(l)],([s,f])=>{if(p(),!s)return;const v=ee(f)?{...f}:f;o.push(...n.flatMap(h=>a.map(w=>u(s,h,w,v))))},{immediate:!0,flush:"post"}),c=()=>{g(),p()};return W(c),c}function le(){const e=m(!1),t=K();return t&&J(()=>{e.value=!0},t),e}function L(e){const t=le();return E(()=>(t.value,!!e()))}function B(e,t={}){const{controls:n=!1,navigator:a=X}=t,l=L(()=>a&&"permissions"in a),o=$(),p=typeof e=="string"?{name:e}:e,u=$(),g=()=>{var s,f;u.value=(f=(s=o.value)==null?void 0:s.state)!=null?f:"prompt"};_(o,"change",g);const c=ne(async()=>{if(l.value){if(!o.value)try{o.value=await a.permissions.query(p)}catch{o.value=void 0}finally{g()}if(n)return Q(o.value)}});return c(),n?{state:u,isSupported:l,query:c}:u}function se(e={}){const{navigator:t=X,read:n=!1,source:a,copiedDuring:l=1500,legacy:o=!1}=e,p=L(()=>t&&"clipboard"in t),u=B("clipboard-read"),g=B("clipboard-write"),c=E(()=>p.value||o),s=m(""),f=m(!1),v=oe(()=>f.value=!1,l);function h(){p.value&&x(u.value)?t.clipboard.readText().then(i=>{s.value=i}):s.value=D()}c.value&&n&&_(["copy","cut"],h);async function w(i=d(a)){c.value&&i!=null&&(p.value&&x(g.value)?await t.clipboard.writeText(i):R(i),s.value=i,f.value=!0,v.start())}function R(i){const y=document.createElement("textarea");y.value=i??"",y.style.position="absolute",y.style.opacity="0",document.body.appendChild(y),y.select(),document.execCommand("copy"),y.remove()}function D(){var i,y,A;return(A=(y=(i=document==null?void 0:document.getSelection)==null?void 0:i.call(document))==null?void 0:y.toString())!=null?A:""}function x(i){return i==="granted"||i==="prompt"}return{isSupported:c,text:s,copied:f,copy:w}}function ue(e,t={}){var n,a;const{pointerTypes:l,preventDefault:o,stopPropagation:p,exact:u,onMove:g,onEnd:c,onStart:s,initialValue:f,axis:v="both",draggingElement:h=Y,containerElement:w,handle:R=e,buttons:D=[0]}=t,x=m((n=d(f))!=null?n:{x:0,y:0}),i=m(),y=r=>l?l.includes(r.pointerType):!0,A=r=>{d(o)&&r.preventDefault(),d(p)&&r.stopPropagation()},k=r=>{var M;if(!d(D).includes(r.button)||d(t.disabled)||!y(r)||d(u)&&r.target!==d(e))return;const b=d(w),C=(M=b==null?void 0:b.getBoundingClientRect)==null?void 0:M.call(b),S=d(e).getBoundingClientRect(),P={x:r.clientX-(b?S.left-C.left+b.scrollLeft:S.left),y:r.clientY-(b?S.top-C.top+b.scrollTop:S.top)};(s==null?void 0:s(P,r))!==!1&&(i.value=P,A(r))},q=r=>{if(d(t.disabled)||!y(r)||!i.value)return;const M=d(w),b=d(e).getBoundingClientRect();let{x:C,y:S}=x.value;(v==="x"||v==="both")&&(C=r.clientX-i.value.x,M&&(C=Math.min(Math.max(0,C),M.scrollWidth-b.width))),(v==="y"||v==="both")&&(S=r.clientY-i.value.y,M&&(S=Math.min(Math.max(0,S),M.scrollHeight-b.height))),x.value={x:C,y:S},g==null||g(x.value,r),A(r)},V=r=>{d(t.disabled)||!y(r)||i.value&&(i.value=void 0,c==null||c(x.value,r),A(r))};if(T){const r={capture:(a=t.capture)!=null?a:!0};_(R,"pointerdown",k,r),_(h,"pointermove",q,r),_(h,"pointerup",V,r)}return{...ae(x),position:x,isDragging:E(()=>!!i.value),style:E(()=>`left:${x.value.x}px;top:${x.value.y}px;`)}}function ce(e,t){const{x:n,y:a,isDragging:l}=ue(t),o=m(0),p=m(0),u=m(!1),g=m(0),c=m(0),s=m(0),f=m(0),v=m({left:0,right:0,top:0,bottom:0});return O([n,a],()=>{if(!u.value){o.value=n.value,p.value=a.value;const h=document.body.getBoundingClientRect(),w=e.value.getBoundingClientRect();v.value.right=h.width-w.width,v.value.bottom=h.height-w.height,s.value=g.value,f.value=c.value}u.value=!0}),O(l,()=>{l.value||(u.value=!1)}),U(()=>{u.value&&(g.value=s.value+Math.min(Math.max(v.value.left,n.value),v.value.right)-o.value,c.value=f.value+Math.min(Math.max(v.value.top,a.value),v.value.bottom)-p.value)}),E(()=>({transform:`translate(${g.value}px, ${c.value}px)`}))}export{ce as a,se as u};
