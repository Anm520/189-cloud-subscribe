import{_ as C}from"./folder-DQKMwCl7.js";import{r as p,q as L,A as f,j as e,f as b,c as y,e as g,b as x,o as t,g as h,n as l,t as m,k as T,x as k,y as z}from"./index-CBYdP0Oa.js";import{g as F}from"./index-CbH7X_L3.js";import"./useDayjs-B1OV81JK.js";const N={class:"app-container"},S={key:0},w={key:0,alt:"",src:C,style:{width:"28px",height:"28px","margin-right":"10px"}},B={key:0},E={key:1},O={key:2},M={__name:"index",setup(V){const i=p(!1),v=[{title:"文件名",dataIndex:"name",key:"name",width:"40%"},{title:"大小",dataIndex:"size",key:"size"},{title:"修改时间",dataIndex:"lastOpTime"},{title:"创建时间",dataIndex:"createDate"}],u=p([]);L(()=>{_()});const _=()=>{i.value=!0,f.getRecycleList().then(a=>{console.log("回收站列表>>",a);const n=a.folderList.map(s=>({...s,isFolder:!0})),d=a.fileList.map(s=>({...s,isFolder:!1}));u.value=[...n,...d]}).finally(()=>{i.value=!1})},r=p(!1),I=()=>{r.value=!0,f.createBatchTask({type:"EMPTY_RECYCLE",taskInfos:JSON.stringify([]),targetFolderId:""}).then(a=>{console.log("res >>>",a),setTimeout(()=>{_()},1e3)}).finally(()=>{r.value=!1})};return(a,n)=>{const d=x("a-button"),s=x("a-table");return t(),e("div",N,[b("div",null,[y(d,{type:"primary",onClick:I,loading:r.value},{default:g(()=>n[0]||(n[0]=[h("清空回收站")])),_:1},8,["loading"])]),y(s,{columns:v,dataSource:u.value,pagination:!1,scroll:{y:"clac(100% - 100px)"},loading:i.value,rowKey:"id"},{bodyCell:g(({column:c,record:o})=>[c.dataIndex==="name"?(t(),e("span",S,[o.isFolder?(t(),e("img",w)):l("",!0),h(" "+m(o.name),1)])):l("",!0),c.dataIndex==="size"?(t(),e(T,{key:1},[o.size?(t(),e("span",E,m(k(F)(o.size)),1)):(t(),e("span",B,"文件夹"))],64)):l("",!0),c.dataIndex==="lastOpTime"?(t(),e("span",O,m(k(z)(o.lastOpTime).fromNow()),1)):l("",!0)]),_:1},8,["dataSource","loading"])])}}};export{M as default};
