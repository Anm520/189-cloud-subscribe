import{_ as C,g as L}from"./index-CgFVIvyu.js";import{r as p,q as b,A as f,j as e,f as T,c as y,e as g,b as x,o as t,g as h,n as l,t as u,k as z,x as k,y as F}from"./index-B62j_sKj.js";import"./useDayjs-DP_NlzOV.js";const N={class:"app-container"},S={key:0},w={key:0,alt:"",src:C,style:{width:"28px",height:"28px","margin-right":"10px"}},B={key:0},E={key:1},O={key:2},D={__name:"index",setup(V){const i=p(!1),v=[{title:"文件名",dataIndex:"name",key:"name",width:"40%"},{title:"大小",dataIndex:"size",key:"size"},{title:"修改时间",dataIndex:"lastOpTime"},{title:"创建时间",dataIndex:"createDate"}],_=p([]);b(()=>{m()});const m=()=>{i.value=!0,f.getRecycleList().then(a=>{console.log("回收站列表>>",a);const n=a.folderList.map(s=>({...s,isFolder:!0})),d=a.fileList.map(s=>({...s,isFolder:!1}));_.value=[...n,...d]}).finally(()=>{i.value=!1})},r=p(!1),I=()=>{r.value=!0,f.createBatchTask({type:"EMPTY_RECYCLE",taskInfos:JSON.stringify([]),targetFolderId:""}).then(a=>{console.log("res >>>",a),setTimeout(()=>{m()},1e3)}).finally(()=>{r.value=!1})};return(a,n)=>{const d=x("a-button"),s=x("a-table");return t(),e("div",N,[T("div",null,[y(d,{type:"primary",onClick:I,loading:r.value},{default:g(()=>n[0]||(n[0]=[h("清空回收站")])),_:1},8,["loading"])]),y(s,{columns:v,dataSource:_.value,pagination:!1,scroll:{y:"clac(100% - 100px)"},loading:i.value,rowKey:"id"},{bodyCell:g(({column:c,record:o})=>[c.dataIndex==="name"?(t(),e("span",S,[o.isFolder?(t(),e("img",w)):l("",!0),h(" "+u(o.name),1)])):l("",!0),c.dataIndex==="size"?(t(),e(z,{key:1},[o.size?(t(),e("span",E,u(k(L)(o.size)),1)):(t(),e("span",B,"文件夹"))],64)):l("",!0),c.dataIndex==="lastOpTime"?(t(),e("span",O,u(k(F)(o.lastOpTime).fromNow()),1)):l("",!0)]),_:1},8,["dataSource","loading"])])}}};export{D as default};
