import{d as C,r as c,_ as k,c as p,o as w,a as b,b as v,e,u as n,f as S,t as x,h as V,g as i,w as N,i as $,A as j,j as A,k as B}from"./index-idOx3MXX.js";const P="/assets/chen-CIhjr1N1.jpeg",U=C("account",()=>{const f=c(""),u=c(0),r=c({freeSize:0,mail189UsedSize:0,totalSize:0,usedSize:0}),s=c({freeSize:0,totalSize:0,usedSize:0});function t(d,a){switch(d){case"account":f.value=a;break;case"totalSize":u.value=a;break;case"cloudCapacityInfo":r.value=a;break;case"familyCapacityInfo":s.value=a;break}}return{account:f,totalSize:u,familyCapacityInfo:s,cloudCapacityInfo:r,setValue:t}}),q={class:"user-info-top"},D={class:"user-info-name"},E={class:"name"},F={__name:"index",setup(f){const u=A(),r=c(window.localStorage.getItem("username")),s=c(window.localStorage.getItem("account")),t=U(),d=p(()=>t.totalSize),a=p(()=>t.cloudCapacityInfo),_=p(()=>t.familyCapacityInfo),{setValue:m}=t,z=()=>{window.localStorage.removeItem("username"),window.localStorage.removeItem("token"),u.push("/login")},h=()=>{(s!=t.account||!d.value)&&window.sessionStorage.getItem("cloud")&&j.getUserSizeInfo().then(l=>{m("account",s.value),m("totalSize",l.totalSize),m("cloudCapacityInfo",l.cloudCapacityInfo),m("familyCapacityInfo",l.familyCapacityInfo)})};return w(()=>{h()}),(g,l)=>{const I=S("van-image"),o=S("van-cell"),y=S("van-button");return B(),b("div",null,[v("div",q,[e(I,{height:"60px",round:"",src:n(P),width:"60px"},null,8,["src"]),v("div",D,[v("div",E,x(r.value),1)])]),e(o,{title:"云盘账号:","is-link":"",value:n(V)(s.value),size:"small",to:"/home/account"},null,8,["value"]),e(o,{title:"总空间:",value:n(i)(d.value),inset:""},null,8,["value"]),e(o,{title:"个人空间:",inset:"",value:`${n(i)(a.value.usedSize)}/${n(i)(a.value.totalSize)}`},null,8,["value"]),e(o,{title:"家庭空间:",inset:"",value:`${n(i)(_.value.usedSize)}/${n(i)(_.value.totalSize)}`},null,8,["value"]),e(o,{title:"定时设置","is-link":"",size:"small",to:"/home/user/setting"}),e(o,{title:"修改密码","is-link":"",size:"small",to:"/home/user/register"}),e(o,{title:"频道消息","is-link":"",size:"small",to:"/home/user/channel"}),e(y,{block:"",hairline:"",square:"",type:"default",onClick:z},{default:N(()=>l[0]||(l[0]=[$("退出登录")])),_:1})])}}},M=k(F,[["__scopeId","data-v-b85d9cdb"]]);export{M as default};
